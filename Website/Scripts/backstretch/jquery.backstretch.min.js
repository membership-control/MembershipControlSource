/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function(n,t,i){"use strict";var r,u,f;n.fn.backstretch=function(r,f){return(r===i||r.length===0)&&n.error("No images were supplied for Backstretch"),n(t).scrollTop()===0&&t.scrollTo(0,0),this.each(function(){var i=n(this),t=i.data("backstretch");if(t){if(typeof r=="string"&&typeof t[r]=="function"){t[r](f);return}f=n.extend(t.options,f);t.destroy(!0)}t=new u(this,r,f);i.data("backstretch",t)})};n.backstretch=function(t,i){return n("body").backstretch(t,i).data("backstretch")};n.expr[":"].backstretch=function(t){return n(t).data("backstretch")!==i};n.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};r={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}};u=function(i,u,e){var o,s,h;this.options=n.extend({},n.fn.backstretch.defaults,e||{});this.images=n.isArray(u)?u:[u];n.each(this.images,function(){n("<img />")[0].src=this});this.isBody=i===document.body;this.$container=n(i);this.$root=this.isBody?f?n(t):n(document):this.$container;o=this.$container.children(".backstretch").first();this.$wrap=o.length?o:n('<div class="backstretch"><\/div>').css(r.wrap).appendTo(this.$container);this.isBody||(s=this.$container.css("position"),h=this.$container.css("zIndex"),this.$container.css({position:s==="static"?"relative":s,zIndex:h==="auto"?0:h,background:"none"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody&&f?"fixed":"absolute"});this.index=0;this.show(this.index);n(t).on("resize.backstretch",n.proxy(this.resize,this)).on("orientationchange.backstretch",n.proxy(function(){this.isBody&&t.pageYOffset===0&&(t.scrollTo(0,1),this.resize())},this))};u.prototype={resize:function(){try{var f={left:0,top:0},e=this.isBody?this.$root.width():this.$root.innerWidth(),i=e,r=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),n=i/this.$img.data("ratio"),u;n>=r?(u=(n-r)/2,this.options.centeredY&&(f.top="-"+u+"px")):(n=r,i=n*this.$img.data("ratio"),u=(i-e)/2,this.options.centeredX&&(f.left="-"+u+"px"));this.$wrap.css({width:e,height:r}).find("img:not(.deleteable)").css({width:i,height:n}).css(f)}catch(o){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){var i=this,f=i.$wrap.find("img").addClass("deleteable"),u={relatedTarget:i.$container[0]};return i.$container.trigger(n.Event("backstretch.before",u),[i,t]),this.index=t,clearInterval(i.interval),i.$img=n("<img />").css(r.img).bind("load",function(r){var e=this.width||n(r.target).width(),o=this.height||n(r.target).height();n(this).data("ratio",e/o);n(this).fadeIn(i.options.speed||i.options.fade,function(){f.remove();i.paused||i.cycle();n(["after","show"]).each(function(){i.$container.trigger(n.Event("backstretch."+this,u),[i,t])})});i.resize()}).appendTo(i.$wrap),i.$img.attr("src",i.images[t]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(n.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){n(t).off("resize.backstretch orientationchange.backstretch");clearInterval(this.interval);i||this.$wrap.remove();this.$container.removeData("backstretch")}};f=function(){var n=navigator.userAgent,r=navigator.platform,f=n.match(/AppleWebKit\/([0-9]+)/),i=!!f&&f[1],e=n.match(/Fennec\/([0-9]+)/),o=!!e&&e[1],u=n.match(/Opera Mobi\/([0-9]+)/),c=!!u&&u[1],s=n.match(/MSIE ([0-9]+)/),h=!!s&&s[1];return!((r.indexOf("iPhone")>-1||r.indexOf("iPad")>-1||r.indexOf("iPod")>-1)&&i&&i<534||t.operamini&&{}.toString.call(t.operamini)==="[object OperaMini]"||u&&c<7458||n.indexOf("Android")>-1&&i&&i<533||o&&o<6||"palmGetResource"in t&&i&&i<534||n.indexOf("MeeGo")>-1&&n.indexOf("NokiaBrowser/8.5.0")>-1||h&&h<=6)}()})(jQuery,window);
//# sourceMappingURL=jquery.backstretch.min.js.map
